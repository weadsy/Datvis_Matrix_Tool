<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DatVis Tool Suite</title>

    <link rel="stylesheet" href="css/style.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- interact.js v1 -->
    <script src="https://cdn.jsdelivr.net/npm/interactjs@1.10.11/dist/interact.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

  </head>

  <body
    class="overflow-hidden bg-gray-900 min-h-screen p-2 flex items-center justify-center"
  >
    <!-- zoom controls -->
    <div class="ui-control absolute top-4 right-4 flex space-x-2 z-20">
      <button title="Inverse" id="inverse-btn" class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600">
        A<sup>-1</sup>
      </button>
      <button title="RREF"  id="rref-btn" class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600">
        RREF
      </button>
      <button
        id="det-btn"  title="Determinant" 
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        | A |
      </button>
      <button
        id="multiply-btn" title="Multiplication" 
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        A x B
      </button>
      <button
        id="add-btn" title="Addition" 
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        A + B
      </button>
      <button
        id="tanspose-button" title="Transpose" 
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        A<sup>T</sup>
      </button>

      <button
        id="group-btn" title="Sort blocks into matrix" 
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Group
      </button>
    </div>

    <!-- new: vertical slider, 1rem below the buttons -->
    <div
      class="ui-control absolute"
      style="top: 7rem; right: -2rem; z-index: 20"
    >
      <input
        id="zoom-slider"
        type="range"
        min="0.2"
        max="1.5"
        step="0.01"
        value="0.6"
        class="w-32 h-2 -rotate-90 origin-center"
      />
    </div>
    <div
      class="ui-control absolute"
      style="top: 12rem; right: 1rem; z-index: 20"
    >
      <!-- Magnifying glass icon from Heroicons -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6 mt-2 text-gray-400"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"
        />
      </svg>
    </div>

    <div class="ui-control absolute top-4 left-4 flex space-x-2 z-20">
      <!-- bg-green-600 text-white px-3 py-1 rounded shadow hover:bg-green-500-->
      <button
        id="add-square"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Add Square
      </button>
      <button
        id="copy-btn"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Copy
      </button>
      <button
        id="delete-btn"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Delete
      </button>
      <button
        id="lock-btn"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Lock
      </button>
      <label
        id="edit-labels-label"
        class="flex items-center bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600 cursor-pointer"
      >
        <input type="checkbox" id="edit-labels" class="mr-2 checked" />
        Edit Matrix
      </label>
    </div>

    <div class="ui-control absolute top-14 left-4 flex space-x-2 z-20">
      <!-- bg-green-600 text-white px-3 py-1 rounded shadow hover:bg-green-500-->
      <button
        id="reset-btn"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Reset
      </button>
      <button
        id="undo-btn"
        class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600"
      >
        Undo
      </button>
      <!-- <button id="step-toggle" class="bg-gray-700 text-white px-3 py-1 rounded shadow hover:bg-gray-600">
        Step Mode
      </button> -->
      
    </div>


    <!-- TUTORIAL WINDOW -->
    <div id="tutorial" class="ui-control absolute bottom-4 left-4 z-20">
      <div
        id="tutorial-header"
        class="flex justify-between items-center bg-gray-700 text-white px-3 py-2 rounded-t shadow cursor-pointer"
      >
        <div class="font-bold text-lg">INFO</div>
        <button id="tutorial-toggle" class="text-xl leading-none">−</button>
      </div>

      <div
        id="tutorial-body"
        class="bg-gray-700 text-white rounded-b shadow overflow-auto"
      >
        <!-- Minimized content -->
        <div id="tutorial-content-min" class="p-3">
          <p class="text-sm leading-snug">
            • Drag to select a group of squares and perform matrix
            operations.<br />
            • Selected squares can: drag, group, copy, lock, delete + matrix
            ops<br />
            • Control zoom with slider bar or mouse wheel.
          </p>
        </div>

        <!-- Expanded placeholder content -->
        <div
          id="tutorial-content-full"
          class="p-4 space-y-1 bg-gray-700 text-white rounded-b shadow overflow-auto"
        >
          <!-- <div class="text-lg font-bold mb-2">Full Tutorial</div> -->

          <!-- DRAGGING SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Dragging/Selection
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - Select squares by dragging a rectangle around them, then move
              them by clicking &amp; dragging. You can drag individual squares
              or groups of squares. <br />
              - The number at the top of selected block(s) is the number of
              blocks in that specific group. <br />
              - Once blocks are selected you can use the buttons at the top to
              perform operations on the groups of blocks.
            </p>
          </div>

          <!-- GROUPING SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Grouping
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - When blocks are selected you can click the "Group" button to
              arrange blocks into a square grid formation. Locked blocks will
              not be affected.
            </p>
          </div>

          <!-- LOCKING SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Locking
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - After selecting a group, hit “Lock” so that group moves as one
              unit. It will stay continuously selected and you won't be able to
              break up the formation. <br />
              - The locking functionality is very robust. The blocks are
              selected but unlocked selected blocks and locked selected blocks
              will not interact with each other. They can not be grouped.
            </p>
          </div>

          <!-- ZOOMING SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Zooming
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - Use the slider bar or mouse wheel to zoom in and out on the
              canvas. (or +/- buttons)
            </p>
          </div>

          <!-- ADD COPY DELETE SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Add, Copy, Delete
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - Add Square will spawn a new square under the current selection
              (or top right). <br />
              - Copy button will copy the current selection and paste the copy
              on top of the old selection. Copying one row of blocks will paste
              the new row directly under the original. This means you can
              quickly build large square groups using the starting blocks.<br />
              - Delete will remove the current selection
            </p>
          </div>

          <!-- LEGEND SECTION -->
          <div>
            <h3 class="text-xl underline mb-1 underline-offset-[6px]">
              Legend
            </h3>
            <p class="ml-4 py-1 text-sm leading-snug">
              - The legend allows you to change how much a block represents. By
              default a single block represents 1 unit (number is hidden). This
              can be changed by clicking the arrow buttons or entering your own
              number. Remove the text to go back to blank squares.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- outer panel -->
    <div
      id="panel"
      class="flex flex-col w-full h-[calc(100vh-16px)] max-w-[calc(100vw-16px)] bg-gray-800 rounded-lg border-2 border-gray-700 overflow-visible"
    >
      <!-- panel header -->
      <div class="flex items-center justify-center space-x-4 py-2">
        <div
          class="ml-3 text-3xl text-white font-bold underline underline-offset-[6px]"
        >
          Matrix Tool
        </div>
        <div id="kofi-widget">
          <script src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"></script>
          <script>
            kofiwidget2.init("Support me on Ko-fi", "#72a4f2", "J3J51GNZVY");
            kofiwidget2.draw();
          </script>
        </div>
      </div>

      <!-- zooms here -->
      <div id="container" class="relative flex-1 overflow-visible">
        <!-- boxes injected here -->
      </div>
    </div>

    <div class="landing-overlay" id="landingOverlay">
      <div class="landing-content">
        <h1>Welcome To Matrix Tool</h1>
        <p>
          The matrix functionality is similar to the scale tool, except squares
          can now represent individual numbers. Matrix operations can be
          visualized smoothly with easy to follow animations.
        </p>
        <div class="landing-buttons">
          <button class="landing-button primary" id="continueBtn">
            Continue
          </button>
          <button class="landing-button" id="scaleToolBtn">Scale Tool</button>
        </div>
      </div>
    </div>

    <div class="landing-overlay" id="landingOverlay2">
      <div class="landing-content">
        <h1>New User? Try The Tutorial</h1>
        <p>
          It seems like you haven't visited the site in a while
          or this is your first visit. Would you like to try the tutorial?
        </p>
        <div class="landing-buttons">
          <button class="landing-button primary" id="YES_Btn">
            YES
          </button>
          <button class="landing-button" id="NO_Btn">NO</button>
        </div>
      </div>
    </div>

    <div
      id="floating-tutorial"
      class="fixed z-50 inline-flex flex-col items-start bg-gray-600 bg-opacity-90 text-white px-2 py-1 rounded-lg shadow-lg border border-gray-400"
      style="
        top: 7.5rem;
        left: 1.5rem;
        min-width: 0;
        max-width: 15rem;
        display: none;
      "
    >
      <div id="floating-tutorial-text" class="text-lg leading-snug break-words">
        <!-- Tutorial text goes here -->
      </div>
      <button
        id="floating-tutorial-next"
        class="absolute bg-gray-400 text-gray-900 px-2 py-1 rounded shadow hover:bg-gray-300 text-xs font-semibold"
        style="
          right: -0.2rem;
          bottom: -0.2rem;
          transition: background 0.2s;
          transform: translate(50%, 50%);
        "
      >
        Next
      </button>
    </div>

    <!-- Horizontal animation speed slider -->
    <div class="ui-control fixed left-1/2 bottom-8 transform -translate-x-1/2 z-19 flex flex-col items-center"
      style="width: 320px;">
      <label for="speed-slider" class="text-white mb-1 text-sm">Animation Speed</label>
      <input id="speed-slider" type="range" min="-0.7" max="0.7" step="0.01" value="0" class="w-full h-2" />
      <div class="flex justify-between w-full text-xs text-gray-300 mt-1">
        <span>Slower</span>
        <span>Faster</span>
      </div>
    </div>

    <!-- MATRIX MENU WINDOW -->
    <div id="matrix-menu" class="ui-control absolute bottom-4 right-4 z-20">
      <div id="matrix-menu-header"
        class="flex flex-col justify-center items-center bg-gray-700 text-white px-3 py-1 rounded-t shadow">
        <div class="font-bold text-lg leading-tight">Saved Matrices</div>
        <div class="text-xs text-gray-400 text-center leading-tight" style="width:100%;">
          (saved in cookies)
        </div>
      </div>
    
      <div id="matrix-menu-body" class="bg-gray-700 text-white rounded-b shadow overflow-auto max-h-60">
        <div id="matrix-menu-content" class="p-3 space-y-2">
          <p class="text-sm text-gray-300 text-center" id="no-matrices-msg">No saved matrices</p>
        </div>
      </div>
    </div>

    <!--********************** JAVASCRIPT*****************************************************-->
    <script src="js/main.js"></script>
  </body>
</html>
